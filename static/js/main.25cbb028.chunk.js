(this.webpackJsonpplack=this.webpackJsonpplack||[]).push([[0],{128:function(e,a,n){},269:function(e,a,n){e.exports=n(443)},443:function(e,a,n){"use strict";n.r(a);var t=n(0),r=n.n(t),l=n(41),c=n.n(l),o=n(64),i=n(53),s=n(17),u={user:null,isLoading:!0},m={channel:null},d=Object(o.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_USER":return Object(s.a)({},e,{user:a.user,isLoading:!1});default:return e}},channel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_CHANNEL":return Object(s.a)({},e,{channel:a.channel});default:return e}}}),h=n(230),f=n(231),p=n.n(f),g=n(63),E=n(73),b=n(74),v=n(75),j=n(78),O=n(81),y=n(56),C=n(160),k=n.n(C);n(278),n(280),n(444);k.a.initializeApp({apiKey:"AIzaSyBa643TjTtPD0rnjdOfuFLpYyzDdsqr0Iw",authDomain:"plack-23141.firebaseapp.com",databaseURL:"https://plack-23141.firebaseio.com",projectId:"plack-23141",storageBucket:"plack-23141.appspot.com",messagingSenderId:"360318459062",appId:"1:360318459062:web:a7d366336084667dacda17",measurementId:"G-E16F9YZVBR"});var w=k.a,N=n(21),A=n(38),R=n(232),S=n.n(R),P=n(463),L=n(453),D=n(470),x=n(65),I=n(459),U=n(467),z=n(445),T=(n(128),function(){var e=Object(t.useState)({username:"",email:"",password:"",passwordConfirm:"",errors:"",loading:!1,usersRef:w.database().ref("users")}),a=Object(A.a)(e,2),n=a[0],l=a[1],c=function(e){l(Object(s.a)({},n,Object(N.a)({},e.target.name,e.target.value)))},o=function(e){var a=e.username,n=e.password,t=e.email;return a.length&&n.length&&t.length>0},i=function(e){var a=e.password;return a===e.passwordConfirm&&a.length>=6},u=function(e){return n.usersRef.child(e.user.uid).set({name:e.user.displayName,avatar:e.user.photoURL})},m=r.a.createElement(P.a,{color:"red"},n.errors);return r.a.createElement(L.a,{className:"u-heigth100vh",textAlign:"center",verticalAlign:"middle"},r.a.createElement(L.a.Column,{style:{maxWidth:450}},r.a.createElement(D.a,{as:"h2",color:"red",textAlign:"center"},r.a.createElement(x.a,{name:"code",color:"black"}),"Register for Plack"),r.a.createElement(I.a,{size:"large"},r.a.createElement(U.a,{stacked:!0},r.a.createElement(I.a.Input,{fluid:!0,name:"username",icon:"user",iconPosition:"left",placeholder:"Username",onChange:c,type:"text"}),r.a.createElement(I.a.Input,{fluid:!0,name:"email",icon:"mail",iconPosition:"left",placeholder:"Email-adress",onChange:c,type:"email"}),r.a.createElement(I.a.Input,{fluid:!0,name:"password",icon:"lock",iconPosition:"left",placeholder:"Password",onChange:c,type:"password"}),r.a.createElement(I.a.Input,{fluid:!0,name:"passwordConfirm",icon:"repeat",iconPosition:"left",placeholder:"Repeat password",onChange:c,type:"password"}),r.a.createElement(z.a,{disabled:n.loading,className:n.loading?"loading":null,onClick:function(e){(o(n)?i(n)||(l(Object(s.a)({},n,{errors:"Passwords do not match or password to short"})),0):(l(Object(s.a)({},n,{errors:"Fill all fields"})),0))&&(e.preventDefault(),l(Object(s.a)({},n,{loading:!0,errors:""})),w.auth().createUserWithEmailAndPassword(n.email,n.password).then((function(e){e.user.updateProfile({displayName:n.username,photoURL:"https://www.gravatar.com/avatar/".concat(S()(e.user.email),"?d=identicon")}).then((function(){u(e)})).catch((function(e){console.log(e),l(Object(s.a)({},n,{loading:!1,errors:e.message}))}))})).catch((function(e){l(Object(s.a)({},n,{loading:!1,errors:e.message})),console.log(e)})))},color:"red",fluid:!0,size:"large"},"Submit"))),n.errors.length>0?m:null,r.a.createElement(P.a,null,"Already a user? ",r.a.createElement(g.b,{to:"/login"},"Login"))))}),F=function(){var e=Object(t.useState)({email:null,password:null,errors:"",loading:!1}),a=Object(A.a)(e,2),n=a[0],l=a[1],c=function(e){l(Object(s.a)({},n,Object(N.a)({},e.target.name,e.target.value)))},o=function(e){var a=e.email,n=e.password;return!(!a||!n)||l((function(e){return Object(s.a)({},e,{errors:"Fill all fields"})}))},i=r.a.createElement(P.a,{color:"red"},n.errors);return r.a.createElement(L.a,{className:"u-heigth100vh",textAlign:"center",verticalAlign:"middle"},r.a.createElement(L.a.Column,{style:{maxWidth:450}},r.a.createElement(D.a,{as:"h2",color:"red",textAlign:"center"},r.a.createElement(x.a,{name:"code",color:"black"}),"Login to Plack"),r.a.createElement(I.a,{size:"large"},r.a.createElement(U.a,{stacked:!0},r.a.createElement(I.a.Input,{fluid:!0,name:"email",icon:"mail",iconPosition:"left",placeholder:"Email-adress",onChange:c,type:"email"}),r.a.createElement(I.a.Input,{fluid:!0,name:"password",icon:"lock",iconPosition:"left",placeholder:"Password",onChange:c,type:"password"}),r.a.createElement(z.a,{disabled:n.loading,className:n.loading?"loading":null,onClick:function(e){o(n)&&(e.preventDefault(),l((function(e){return Object(s.a)({},e,{loading:!0,errors:""})})),w.auth().signInWithEmailAndPassword(n.email,n.password).then((function(e){l((function(e){return Object(s.a)({},e,{loading:!1})}))})).catch((function(e){console.log(e),l((function(a){return Object(s.a)({},a,{loading:!1,errors:e.message})}))})))},color:"red",fluid:!0,size:"large"},"Login"))),n.errors.length>0?i:null,r.a.createElement(P.a,null,"Not a user? ",r.a.createElement(g.b,{to:"/register"},"Register"))))},M=n(235),B=n(465),_=n(464),W=n(457),H=function(){return r.a.createElement(B.a,{as:_.a,icon:"labeled",inverted:!0,vertical:!0,visible:!0,width:"very thin"},r.a.createElement(W.a,null),r.a.createElement(z.a,{icon:"add",size:"small",color:"blue"}))},G=n(236),q=n(162),J=n(462),V=n(257),Y=function(){w.auth().signOut()},K=function(e){var a=e.userData,n=[{key:"user",text:r.a.createElement("span",null,"Signed in as ",r.a.createElement("strong",null,a.displayName)),disabled:!0},{key:"avatar",text:r.a.createElement("span",null,"Change Avatar")},{key:"signout",text:r.a.createElement("span",{onClick:Y},"Sign Out")}];return r.a.createElement(L.a,null,r.a.createElement(M.a,null,r.a.createElement(G.a,{style:{padding:"1.2em",margin:0}},r.a.createElement(D.a,{inverted:!0,floated:"left",as:"h2"},r.a.createElement(x.a,{name:"code"}),r.a.createElement(q.a,null,"Plack")),r.a.createElement(D.a,{style:{padding:"0.25em"},as:"h4",inverted:!0},r.a.createElement(J.a,{trigger:r.a.createElement("span",null,r.a.createElement(V.a,{src:a.photoURL,spaced:"right",avatar:!0}),a.displayName),options:n})))))},Z=n(460),Q=n(454),X=function(e){var a=e.userData,n=Object(t.useState)({modal:!1,channelName:"",channelDetails:"",channels:[],channelsRef:w.database().ref("channels"),activeChannel:null}),l=Object(A.a)(n,2),c=l[0],o=l[1],u=Object(i.c)();Object(t.useEffect)((function(){return function(){var e=[];c.channelsRef.on("child_added",(function(a){e.push(a.val()),o((function(a){return Object(s.a)({},a,{channels:e})}))}))}(),function(){return c.channelsRef.off()}}),[c.channelsRef]);var m=function(){return o((function(e){return Object(s.a)({},e,{modal:!1})}))},d=function(e){o(Object(s.a)({},c,Object(N.a)({},e.target.name,e.target.value)))},h=function(e){e.preventDefault(),p(c)&&f()},f=function(){var e=c.channelsRef.push().key,n={id:e,name:c.channelName,details:c.channelDetails,createdBy:{name:a.displayName,avatar:a.photoURL}};c.channelsRef.child(e).update(n).then((function(){o((function(e){return Object(s.a)({},e,{channelName:"",channelDetails:""})})),m(),console.log("added channel")})).catch((function(e){console.log(e)}))},p=function(e){var a=e.channelName,n=e.channelDetails;return a&&n};return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a.Menu,{style:{paddingBottom:"2em"}},r.a.createElement(_.a.Item,null,r.a.createElement("span",null,r.a.createElement(x.a,{name:"exchange"})," CHANNELS"),"(",c.channels.length,") ",r.a.createElement(x.a,{name:"add",onClick:function(){return o((function(e){return Object(s.a)({},e,{modal:!0})}))}})),c.channels.map((function(e){return r.a.createElement(_.a.Item,{key:e.id,onClick:function(){return function(e){u(function(e){return{type:"SET_CHANNEL",channel:e}}(e)),o((function(a){return Object(s.a)({},a,{activeChannel:e.id})}))}(e)},name:e.name,active:c.activeChannel===e.id},"#",e.name)}))),r.a.createElement(Z.a,{basic:!0,open:c.modal,onClose:m},r.a.createElement(Z.a.Header,null,"Add a Channel"),r.a.createElement(Z.a.Content,null,r.a.createElement(I.a,{onSubmit:h},r.a.createElement(I.a.Field,null,r.a.createElement(Q.a,{fluid:!0,label:"Name of channel",name:"channelName",onChange:d})),r.a.createElement(I.a.Field,null,r.a.createElement(Q.a,{fluid:!0,label:"About the Channel",name:"channelDetails",onChange:d})))),r.a.createElement(Z.a.Actions,null,r.a.createElement(z.a,{color:"green",inverted:!0,onClick:h},r.a.createElement(x.a,{name:"checkmark"})," Add"),r.a.createElement(z.a,{color:"red",inverted:!0,onClick:m},r.a.createElement(x.a,{name:"remove"})," Cancel"))))},$=function(e){var a=e.userData;return r.a.createElement(_.a,{style:{backgroundColor:"#40123e"},fixed:"left",vertical:!0,inverted:!0,size:"large"},r.a.createElement(K,{userData:a}),r.a.createElement(X,{userData:a}))},ee=n(461),ae=function(){return r.a.createElement(U.a,{clearing:!0},r.a.createElement(D.a,{fluid:"true",as:"h2",floated:"left"},r.a.createElement("span",null,"Channel",r.a.createElement(x.a,{name:"star outline",color:"black"})),r.a.createElement(D.a.Subheader,null,"2 Users")),r.a.createElement(D.a,{floated:"right"},r.a.createElement(Q.a,{size:"mini",type:"text",icon:"search",name:"searchTerm",placeholder:"Search Messages"})))},ne=function(e){var a=e.messageRef,n=e.channel,l=e.user,c=Object(t.useState)({message:"",loading:!1,error:""}),o=Object(A.a)(c,2),i=o[0],u=o[1];return r.a.createElement(U.a,{className:"messageForm"},r.a.createElement(Q.a,{fluid:!0,name:"message",label:r.a.createElement(z.a,{icon:"add"}),labelPosition:"left",className:i.error.length>0?"error":null,placeholder:"Write your message",onChange:function(e){u(Object(s.a)({},i,Object(N.a)({},e.target.name,e.target.value)))}}),r.a.createElement(z.a.Group,{icon:!0,widths:"2",style:{marginTop:"10px"}},r.a.createElement(z.a,{color:"green",content:"Add Reply",labelPosition:"left",icon:"edit",onClick:function(){i.message.length>0?(u((function(e){return Object(s.a)({},e,{loading:!0,error:""})})),a.child(n.id).push().set({content:i.message,timestamp:w.database.ServerValue.TIMESTAMP,user:{id:l.uid,name:l.displayName,avatar:l.photoURL}}).then((function(){u((function(e){return Object(s.a)({},e,{loading:!1,message:""})}))})).catch((function(e){console.log(e),u((function(a){return Object(s.a)({},a,{loading:!1,message:"",error:e.message})}))}))):u((function(e){return Object(s.a)({},e,{error:"No data filled"})}))}}),r.a.createElement(z.a,{color:"red",content:"Upload Media",labelPosition:"right",icon:"cloud upload"})))},te=function(e){var a=e.channel,n=e.user,l=Object(t.useState)(w.database().ref("messages")),c=Object(A.a)(l,2),o=c[0];c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(ae,null),r.a.createElement(U.a,{className:"messages"},r.a.createElement(ee.a.Group,null)),r.a.createElement(ne,{messageRef:o,channel:a,user:n}))},re=function(){return r.a.createElement("div",null,"MetaPanel")},le=function(){var e=Object(i.d)((function(e){return null!==e.user.user?{user:e.user.user,channel:e.channel.channel}:{user:""}}));return r.a.createElement(L.a,{columns:"equal",className:"u-heigth100vh"},r.a.createElement(H,null),r.a.createElement($,{userData:e.user}),r.a.createElement(M.a,{style:{marginLeft:"320px"}},r.a.createElement(te,{channel:e.channel,user:e.user})),r.a.createElement(M.a,{width:4},r.a.createElement(re,null)))},ce=n(466),oe=n(458),ie=function(){return r.a.createElement(ce.a,{active:!0},r.a.createElement(oe.a,{size:"huge",content:"Loading"}))},se=function(e){function a(){return Object(E.a)(this,a),Object(v.a)(this,Object(j.a)(a).apply(this,arguments))}return Object(O.a)(a,e),Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this;w.auth().onAuthStateChanged((function(a){null!==a?(e.props.setUser(a),e.props.history.push("/")):(e.props.setUser(null),e.props.history.push("/login"))}))}},{key:"render",value:function(){return this.props.isLoading?r.a.createElement(ie,null):r.a.createElement("div",{className:"App"},r.a.createElement(y.c,null,r.a.createElement(y.a,{exact:!0,path:"/",component:le}),r.a.createElement(y.a,{path:"/login",component:F}),r.a.createElement(y.a,{path:"/register",component:T})))}}]),a}(r.a.Component),ue=Object(y.f)(Object(i.b)((function(e){return{isLoading:e.user.isLoading}}),{setUser:function(e){return{type:"SET_USER",user:e}}})(se)),me=(n(442),Object(o.d)((function(e,a){return"RESET_APP"===a.type&&(e=void 0),d(e,a)}),Object(o.a)(h.a,p.a)));c.a.render(r.a.createElement(g.a,null,r.a.createElement(i.a,{store:me},r.a.createElement(ue,null))),document.getElementById("root"))}},[[269,1,2]]]);
//# sourceMappingURL=main.25cbb028.chunk.js.map