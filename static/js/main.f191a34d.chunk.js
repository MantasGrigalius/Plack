(this["webpackJsonpreact-slack-clone"]=this["webpackJsonpreact-slack-clone"]||[]).push([[0],{162:function(e,a,n){},316:function(e,a,n){e.exports=n(554)},554:function(e,a,n){"use strict";n.r(a);var t=n(0),r=n.n(t),l=n(46),c=n.n(l),o=n(70),i=n(60),s=n(17),u={user:null,isLoading:!0},m={channel:null},d=Object(o.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_USER":return Object(s.a)({},e,{user:a.user,isLoading:!1});default:return e}},channel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_CHANNEL":return Object(s.a)({},e,{channel:a.channel});default:return e}}}),h=n(276),f=n(277),p=n.n(f),g=n(581),E=n(79),b=n(80),v=n(81),j=n(84),O=n(87),y=n(586),C=n(572),k=n(585),w=n(195),N=n.n(w);n(388),n(390),n(555);N.a.initializeApp({apiKey:"AIzaSyBa643TjTtPD0rnjdOfuFLpYyzDdsqr0Iw",authDomain:"plack-23141.firebaseapp.com",databaseURL:"https://plack-23141.firebaseio.com",projectId:"plack-23141",storageBucket:"plack-23141.appspot.com",messagingSenderId:"360318459062",appId:"1:360318459062:web:a7d366336084667dacda17",measurementId:"G-E16F9YZVBR"});var A=N.a,R=n(20),S=n(42),P=n(567),L=n(278),D=n.n(L),x=n(577),I=n(565),U=n(584),z=n(71),T=n(573),F=n(582),M=n(556),B=(n(162),function(){var e=Object(t.useState)({username:"",email:"",password:"",passwordConfirm:"",errors:"",loading:!1,usersRef:A.database().ref("users")}),a=Object(S.a)(e,2),n=a[0],l=a[1],c=function(e){l(Object(s.a)({},n,Object(R.a)({},e.target.name,e.target.value)))},o=function(e){var a=e.username,n=e.password,t=e.email;return a.length&&n.length&&t.length>0},i=function(e){var a=e.password;return a===e.passwordConfirm&&a.length>=6},u=function(e){return n.usersRef.child(e.user.uid).set({name:e.user.displayName,avatar:e.user.photoURL})},m=r.a.createElement(x.a,{color:"red"},n.errors);return r.a.createElement(I.a,{className:"u-heigth100vh",textAlign:"center",verticalAlign:"middle"},r.a.createElement(I.a.Column,{style:{maxWidth:450}},r.a.createElement(U.a,{as:"h2",color:"red",textAlign:"center"},r.a.createElement(z.a,{name:"code",color:"black"}),"Register for Plack"),r.a.createElement(T.a,{size:"large"},r.a.createElement(F.a,{stacked:!0},r.a.createElement(T.a.Input,{fluid:!0,name:"username",icon:"user",iconPosition:"left",placeholder:"Username",onChange:c,type:"text"}),r.a.createElement(T.a.Input,{fluid:!0,name:"email",icon:"mail",iconPosition:"left",placeholder:"Email-adress",onChange:c,type:"email"}),r.a.createElement(T.a.Input,{fluid:!0,name:"password",icon:"lock",iconPosition:"left",placeholder:"Password",onChange:c,type:"password"}),r.a.createElement(T.a.Input,{fluid:!0,name:"passwordConfirm",icon:"repeat",iconPosition:"left",placeholder:"Repeat password",onChange:c,type:"password"}),r.a.createElement(M.a,{disabled:n.loading,className:n.loading?"loading":null,onClick:function(e){(o(n)?i(n)||(l(Object(s.a)({},n,{errors:"Passwords do not match or password to short"})),0):(l(Object(s.a)({},n,{errors:"Fill all fields"})),0))&&(e.preventDefault(),l(Object(s.a)({},n,{loading:!0,errors:""})),A.auth().createUserWithEmailAndPassword(n.email,n.password).then((function(e){e.user.updateProfile({displayName:n.username,photoURL:"https://www.gravatar.com/avatar/".concat(D()(e.user.email),"?d=identicon")}).then((function(){u(e)})).catch((function(e){console.log(e),l(Object(s.a)({},n,{loading:!1,errors:e.message}))}))})).catch((function(e){l(Object(s.a)({},n,{loading:!1,errors:e.message})),console.log(e)})))},color:"red",fluid:!0,size:"large"},"Submit"))),n.errors.length>0?m:null,r.a.createElement(x.a,null,"Already a user? ",r.a.createElement(P.a,{to:"/login"},"Login"))))}),_=function(){var e=Object(t.useState)({email:null,password:null,errors:"",loading:!1}),a=Object(S.a)(e,2),n=a[0],l=a[1],c=function(e){l(Object(s.a)({},n,Object(R.a)({},e.target.name,e.target.value)))},o=function(e){var a=e.email,n=e.password;return!(!a||!n)||l((function(e){return Object(s.a)({},e,{errors:"Fill all fields"})}))},i=r.a.createElement(x.a,{color:"red"},n.errors);return r.a.createElement(I.a,{className:"u-heigth100vh",textAlign:"center",verticalAlign:"middle"},r.a.createElement(I.a.Column,{style:{maxWidth:450}},r.a.createElement(U.a,{as:"h2",color:"red",textAlign:"center"},r.a.createElement(z.a,{name:"code",color:"black"}),"Login to Plack"),r.a.createElement(T.a,{size:"large"},r.a.createElement(F.a,{stacked:!0},r.a.createElement(T.a.Input,{fluid:!0,name:"email",icon:"mail",iconPosition:"left",placeholder:"Email-adress",onChange:c,type:"email"}),r.a.createElement(T.a.Input,{fluid:!0,name:"password",icon:"lock",iconPosition:"left",placeholder:"Password",onChange:c,type:"password"}),r.a.createElement(M.a,{disabled:n.loading,className:n.loading?"loading":null,onClick:function(e){o(n)&&(e.preventDefault(),l((function(e){return Object(s.a)({},e,{loading:!0,errors:""})})),A.auth().signInWithEmailAndPassword(n.email,n.password).then((function(e){l((function(e){return Object(s.a)({},e,{loading:!1})}))})).catch((function(e){console.log(e),l((function(a){return Object(s.a)({},a,{loading:!1,errors:e.message})}))})))},color:"red",fluid:!0,size:"large"},"Login"))),n.errors.length>0?i:null,r.a.createElement(x.a,null,"Not a user? ",r.a.createElement(P.a,{to:"/register"},"Register"))))},W=n(281),H=n(583),G=n(578),q=n(570),J=function(){return r.a.createElement(H.a,{as:G.a,icon:"labeled",inverted:!0,vertical:!0,visible:!0,width:"very thin"},r.a.createElement(q.a,null),r.a.createElement(M.a,{icon:"add",size:"small",color:"blue"}))},V=n(282),Y=n(197),K=n(576),Z=n(304),Q=function(){A.auth().signOut()},X=function(e){var a=e.userData,n=[{key:"user",text:r.a.createElement("span",null,"Signed in as ",r.a.createElement("strong",null,a.displayName)),disabled:!0},{key:"avatar",text:r.a.createElement("span",null,"Change Avatar")},{key:"signout",text:r.a.createElement("span",{onClick:Q},"Sign Out")}];return r.a.createElement(I.a,null,r.a.createElement(W.a,null,r.a.createElement(V.a,{style:{padding:"1.2em",margin:0}},r.a.createElement(U.a,{inverted:!0,floated:"left",as:"h2"},r.a.createElement(z.a,{name:"code"}),r.a.createElement(Y.a,null,"Plack")),r.a.createElement(U.a,{style:{padding:"0.25em"},as:"h4",inverted:!0},r.a.createElement(K.a,{trigger:r.a.createElement("span",null,r.a.createElement(Z.a,{src:a.photoURL,spaced:"right",avatar:!0}),a.displayName),options:n})))))},$=n(574),ee=n(566),ae=function(e){var a=e.userData,n=Object(t.useState)({modal:!1,channelName:"",channelDetails:"",channels:[],channelsRef:A.database().ref("channels"),activeChannel:null}),l=Object(S.a)(n,2),c=l[0],o=l[1],u=Object(i.c)();Object(t.useEffect)((function(){return function(){var e=[];c.channelsRef.on("child_added",(function(a){e.push(a.val()),o((function(a){return Object(s.a)({},a,{channels:e})}))}))}(),function(){return c.channelsRef.off()}}),[c.channelsRef]);var m=function(){return o((function(e){return Object(s.a)({},e,{modal:!1})}))},d=function(e){o(Object(s.a)({},c,Object(R.a)({},e.target.name,e.target.value)))},h=function(e){e.preventDefault(),p(c)&&f()},f=function(){var e=c.channelsRef.push().key,n={id:e,name:c.channelName,details:c.channelDetails,createdBy:{name:a.displayName,avatar:a.photoURL}};c.channelsRef.child(e).update(n).then((function(){o((function(e){return Object(s.a)({},e,{channelName:"",channelDetails:""})})),m(),console.log("added channel")})).catch((function(e){console.log(e)}))},p=function(e){var a=e.channelName,n=e.channelDetails;return a&&n};return r.a.createElement(r.a.Fragment,null,r.a.createElement(G.a.Menu,{style:{paddingBottom:"2em"}},r.a.createElement(G.a.Item,null,r.a.createElement("span",null,r.a.createElement(z.a,{name:"exchange"})," CHANNELS"),"(",c.channels.length,") ",r.a.createElement(z.a,{name:"add",onClick:function(){return o((function(e){return Object(s.a)({},e,{modal:!0})}))}})),c.channels.map((function(e){return r.a.createElement(G.a.Item,{key:e.id,onClick:function(){return function(e){u(function(e){return{type:"SET_CHANNEL",channel:e}}(e)),o((function(a){return Object(s.a)({},a,{activeChannel:e.id})}))}(e)},name:e.name,active:c.activeChannel===e.id},"#",e.name)}))),r.a.createElement($.a,{basic:!0,open:c.modal,onClose:m},r.a.createElement($.a.Header,null,"Add a Channel"),r.a.createElement($.a.Content,null,r.a.createElement(T.a,{onSubmit:h},r.a.createElement(T.a.Field,null,r.a.createElement(ee.a,{fluid:!0,label:"Name of channel",name:"channelName",onChange:d})),r.a.createElement(T.a.Field,null,r.a.createElement(ee.a,{fluid:!0,label:"About the Channel",name:"channelDetails",onChange:d})))),r.a.createElement($.a.Actions,null,r.a.createElement(M.a,{color:"green",inverted:!0,onClick:h},r.a.createElement(z.a,{name:"checkmark"})," Add"),r.a.createElement(M.a,{color:"red",inverted:!0,onClick:m},r.a.createElement(z.a,{name:"remove"})," Cancel"))))},ne=function(e){var a=e.userData;return r.a.createElement(G.a,{style:{backgroundColor:"#40123e"},fixed:"left",vertical:!0,inverted:!0,size:"large"},r.a.createElement(X,{userData:a}),r.a.createElement(ae,{userData:a}))},te=n(575),re=function(){return r.a.createElement(F.a,{clearing:!0},r.a.createElement(U.a,{fluid:"true",as:"h2",floated:"left"},r.a.createElement("span",null,"Channel",r.a.createElement(z.a,{name:"star outline",color:"black"})),r.a.createElement(U.a.Subheader,null,"2 Users")),r.a.createElement(U.a,{floated:"right"},r.a.createElement(ee.a,{size:"mini",type:"text",icon:"search",name:"searchTerm",placeholder:"Search Messages"})))},le=function(e){var a=e.messageRef,n=e.channel,l=e.user,c=Object(t.useState)({message:"",loading:!1,error:""}),o=Object(S.a)(c,2),i=o[0],u=o[1];return r.a.createElement(F.a,{className:"messageForm"},r.a.createElement(ee.a,{fluid:!0,name:"message",label:r.a.createElement(M.a,{icon:"add"}),labelPosition:"left",className:i.error.length>0?"error":null,placeholder:"Write your message",onChange:function(e){u(Object(s.a)({},i,Object(R.a)({},e.target.name,e.target.value)))}}),r.a.createElement(M.a.Group,{icon:!0,widths:"2",style:{marginTop:"10px"}},r.a.createElement(M.a,{color:"green",content:"Add Reply",labelPosition:"left",icon:"edit",onClick:function(){i.message.length>0?(u((function(e){return Object(s.a)({},e,{loading:!0,error:""})})),a.child(n.id).push().set({content:i.message,timestamp:A.database.ServerValue.TIMESTAMP,user:{id:l.uid,name:l.displayName,avatar:l.photoURL}}).then((function(){u((function(e){return Object(s.a)({},e,{loading:!1,message:""})}))})).catch((function(e){console.log(e),u((function(a){return Object(s.a)({},a,{loading:!1,message:"",error:e.message})}))}))):u((function(e){return Object(s.a)({},e,{error:"No data filled"})}))}}),r.a.createElement(M.a,{color:"red",content:"Upload Media",labelPosition:"right",icon:"cloud upload"})))},ce=function(e){var a=e.channel,n=e.user,l=Object(t.useState)(A.database().ref("messages")),c=Object(S.a)(l,2),o=c[0];c[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(re,null),r.a.createElement(F.a,{className:"messages"},r.a.createElement(te.a.Group,null)),r.a.createElement(le,{messageRef:o,channel:a,user:n}))},oe=function(){return r.a.createElement("div",null,"MetaPanel")},ie=function(){var e=Object(i.d)((function(e){return null!==e.user.user?{user:e.user.user,channel:e.channel.channel}:{user:""}}));return r.a.createElement(I.a,{columns:"equal",className:"u-heigth100vh"},r.a.createElement(J,null),r.a.createElement(ne,{userData:e.user}),r.a.createElement(W.a,{style:{marginLeft:"320px"}},r.a.createElement(ce,{channel:e.channel,user:e.user})),r.a.createElement(W.a,{width:4},r.a.createElement(oe,null)))},se=n(580),ue=n(571),me=function(){return r.a.createElement(se.a,{active:!0},r.a.createElement(ue.a,{size:"huge",content:"Loading"}))},de=function(e){function a(){return Object(E.a)(this,a),Object(v.a)(this,Object(j.a)(a).apply(this,arguments))}return Object(O.a)(a,e),Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this;A.auth().onAuthStateChanged((function(a){null!==a?(e.props.setUser(a),e.props.history.push("/")):(e.props.setUser(null),e.props.history.push("/login"))}))}},{key:"render",value:function(){return this.props.isLoading?r.a.createElement(me,null):r.a.createElement("div",{className:"App"},r.a.createElement(y.a,null,r.a.createElement(C.a,{exact:!0,path:"/",component:ie}),r.a.createElement(C.a,{path:"/login",component:_}),r.a.createElement(C.a,{path:"/register",component:B})))}}]),a}(r.a.Component),he=Object(k.a)(Object(i.b)((function(e){return{isLoading:e.user.isLoading}}),{setUser:function(e){return{type:"SET_USER",user:e}}})(de)),fe=(n(553),Object(o.d)((function(e,a){return"RESET_APP"===a.type&&(e=void 0),d(e,a)}),Object(o.a)(h.a,p.a)));c.a.render(r.a.createElement(g.a,null,r.a.createElement(i.a,{store:fe},r.a.createElement(he,null))),document.getElementById("root"))}},[[316,1,2]]]);
//# sourceMappingURL=main.f191a34d.chunk.js.map